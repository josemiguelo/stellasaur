####################################################################################################
[group('PostInstall')]
setup-flatpaks:
  #!/bin/bash

  set -ex

  remove_flatpak() {
    local app_id=$1
    if flatpak info "$app_id" >/dev/null 2>&1; then
      flatpak uninstall --delete-data "$app_id" -y
      echo "âœ… Removed $app_id..."
    else
      echo "âš ï¸ $app_id flatpak is not present on the system. skipping uninstallation..."
    fi
  }

  install_flatpak() {
    local app_id=$1
    local app_name=$2
    if flatpak info "$app_id" >/dev/null 2>&1; then
      echo "âš ï¸ $app_name is already installed."
    else
      echo "ğŸš€ Installing $app_name..."
      if flatpak install -y "$app_id"; then
        echo "âœ… Success: $app_name installed"
      else
        echo "âŒ Error: Failed to install $app_name. Proceeding with remainder of script..."
      fi
    fi
  }

  # flatpaks
  echo "ğŸš€ Configuring flatpaks..."

  remove_flatpak "org.mozilla.firefox"
  install_flatpak "md.obsidian.Obsidian" "Obsidian"

  echo "âœ… Done installing flatpaks"
